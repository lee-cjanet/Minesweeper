{"version":3,"sources":["webpack:///webpack/bootstrap 6da95de89e0210f9e3d5","webpack:///./main.js","webpack:///./js/view.js","webpack:///./js/game.js","webpack:///./js/board.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AC7DA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH,CAAC;;;;;AAKD;AACA;AACA;;AAEA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AChDA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wDAAwD,EAAE,GAAG,EAAE;;AAE/D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qBAAqB,+BAA+B;AACpD;AACA;AACA;AACA,qBAAqB,6BAA6B;AAClD;;AAEA,kCAAkC,IAAI,GAAG,IAAI;;AAE7C;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;;;;;;;AC3IA;;AAEA,oBAAoB;;AAEpB;AACA;;AAEA;AACA,gGAA8C;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,iBAAiB,+BAA+B;AAChD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,mBAAmB,yBAAyB;AAC5C;AACA,qBAAqB,8BAA8B;AACnD,6BAA6B,yEAAyE;AACtG;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6da95de89e0210f9e3d5","import View from './js/view';\nimport Game from './js/game';\n\nconst createNewGame = (level) => {\n  const rootEl = document.getElementById('minesweeper');\n  const game = new Game(level);\n  new View(game, rootEl);\n};\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  createNewGame(\"beginner\");\n\n  let easy = document.getElementById('beginner');\n  let medium = document.getElementById('intermediate');\n  let hard = document.getElementById('difficult');\n\n  easy.addEventListener('click', () => {\n    createNewGame('beginner');\n  });\n\n  medium.addEventListener('click', () => {\n    createNewGame('intermediate');\n  });\n\n  hard.addEventListener('click', () => {\n    createNewGame('difficult');\n  });\n});\n\n\n\n\n// Close the dropdown menu if the user clicks outside of it\nwindow.onclick = function(event) {\n  if (!event.target.matches('.dropbtn')) {\n\n    var dropdowns = document.getElementsByClassName(\"dropdown-content\");\n    var i;\n    for (i = 0; i < dropdowns.length; i++) {\n      var openDropdown = dropdowns[i];\n      if (openDropdown.classList.contains('show')) {\n        openDropdown.classList.remove('show');\n      }\n    }\n  }\n};\n\nexport default createNewGame;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.js\n// module id = 0\n// module chunks = 0","class View {\n  constructor(game, element) {\n    this.game = game;\n    this.element = element;\n\n    this.renderBoard(this.game.size);\n    this.bindEvents();\n  }\n\n  countdown() {\n    var seconds = 180;\n    function tick() {\n      let counter = document.getElementById(\"counter\");\n      seconds--;\n      counter.innerHTML =\n        \"0:\" + (seconds < 10 ? \"0\" : \"\") +  String(seconds);\n        if( seconds > 0 ) {\n          setTimeout(tick, 1000);\n        } else {\n          alert(\"Game over\");\n          return;\n        }\n      }\n      tick();\n  }\n\n\n  bindEvents() {\n    let makeMove = this.makeMove.bind(this);\n    // install a handler on the `li` elements inside the board.\n    [].forEach.call(document.getElementsByClassName('hidden'), function(el) {\n      el.addEventListener('click', (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const tile = event.target;\n        makeMove(tile);\n      });\n    });\n  }\n\n  makeMove(tile) {\n    let string = tile.getAttribute(\"pos\");\n    let pos = JSON.parse(\"[\" + string + \"]\");\n\n    this.countdown();\n\n    try {\n      this.game.playMove(pos);\n    } catch (e) {\n      alert(\"Invalid move! Try again.\");\n      return;\n    }\n\n    if (this.game.isOver()) {\n\n      [].forEach.call(document.getElementsByClassName('hidden'), function(el) {\n        el.addEventListener('click', (event) => {\n          event.preventDefault();\n          event.stopPropagation();\n        });\n      });\n\n      this.game.reveal();\n      this.renderBoard(this.game.size);\n\n      this.element.addClass(\"game-over\");\n\n      const figcaption = document.createElement(\"FIGCAPTION\");\n      figcaption.innerText = \"Game Over\";\n      this.element.append(figcaption);\n\n    } else if (this.game.isWon()) {\n\n      [].forEach.call(document.getElementsByClassName('hidden'), function(el) {\n        el.addEventListener('click', (event) => {\n          event.preventDefault();\n          event.stopPropagation();\n        });\n      });\n\n      this.element.addClass(\"game-won\");\n      const figcaption = document.createElement(\"FIGCAPTION\");\n      figcaption.innerText = \"You Won!\";\n      this.element.append(figcaption);\n\n    } else {\n\n      let bombCount = this.game.countNeighbors(pos);\n      this.renderTile(pos, bombCount);\n    }\n\n  }\n\n  renderTile(pos) {\n    let [x,y] = pos;\n    let newChild = document.querySelectorAll(`li[pos='${x},${y}']`);\n\n    newChild[0].className = \"revealed\";\n    newChild[0].innerText = this.game.grid[x][y].content;\n\n  }\n\n  clearBoard() {\n    const myNode = document.getElementById('minesweeper');\n    while (myNode.firstChild) {\n      myNode.removeChild(myNode.firstChild);\n    }\n  }\n\n  renderBoard(size) {\n    this.clearBoard();\n    let grid = document.getElementById(\"minesweeper\");\n    let solution = this.game.grid;\n\n    for (let row = 0; grid.childElementCount < size; row++) {\n      let ul = document.createElement('ul');\n      ul.className = row;\n      grid.appendChild(ul);\n      for (let col=0; ul.childElementCount < size; col++) {\n        let li = document.createElement('li');\n\n        li.setAttribute('pos', `${row},${col}`);\n\n        if (solution[row][col].revealed) {\n          li.className = \"revealed\";\n          li.innerText = solution[row][col].content;\n        } else {\n          li.className = \"hidden\";\n        }\n\n        ul.appendChild(li);\n      }\n    }\n    console.log(grid);\n  }\n\n}\n\n\nexport default View;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/view.js\n// module id = 1\n// module chunks = 0","import Board from './board';\n\nconst DIFFICULTY = {'beginner': 8, 'intermediate': 12, 'difficult':16};\n\nclass Game {\n  constructor(level = 'beginner') {\n\n    this.size = DIFFICULTY[level];\n    this.board = new Board(DIFFICULTY[level]); //creates empty board object\n\n    this.grid = this.board.grid;\n    this.playMove = this.playMove.bind(this);\n    this.countNeighbors = this.countNeighbors.bind(this);\n    this.isWon = this.isWon.bind(this);\n    this.isOver = this.isOver.bind(this);\n    this.reveal = this.reveal.bind(this);\n    console.log(this.board.locations);\n  }\n\n  isWon() {\n    let grid = this.grid;\n    let count = 0;\n    let merged = [].concat.apply([], this.grid);\n    merged.forEach(function(tileObj) {\n      if (tileObj.revealed && !tileObj.bomb) {\n        count += 1;\n      }\n    });\n    let result = ((this.size * this.size) - this.board.bombs === count);\n  }\n\n  isOver() {\n    let locations = this.board.locations;\n    let grid = this.grid;\n    let over = false;\n\n    locations.forEach(function(pos) {\n      let [x,y] = pos;\n\n      if (grid[x][y].revealed && grid[x][y].bomb) {\n        over = true;\n      }\n    });\n\n    return over;\n  }\n\n  playMove(pos) {\n    let [x,y] = pos;\n    this.grid[x][y].revealed = true;\n  }\n\n  countNeighbors(pos) {\n    let neighbors = this.board.neighbors(pos);\n    let grid = this.grid;\n    let count = 0;\n\n    neighbors.forEach(function(neighbor) {\n      let [x,y] = neighbor;\n      if (grid[x][y].bomb) {\n        count += 1;\n      }\n    });\n\n    let [a,b] = pos;\n    grid[a][b].content = count;\n  }\n\n  reveal() {\n    this.board.reveal(this.grid);\n  }\n\n\n\n  // play() {\n  //   while (!this.isOver() || !this.isWon()) {\n  //     playMove\n  //   }\n    // console.log(this.board.render)\n\n    // get move?\n\n  // }\n\n//   def play\n//   until @board.won? || @board.lost?\n//     puts @board.render\n//\n//     action, pos = get_move\n//     perform_move(action, pos)\n//   end\n//\n//   if @board.won?\n//     puts \"You win!\"\n//   elsif @board.lost?\n//     puts \"**Bomb hit!**\"\n//     puts @board.reveal\n//   end\n// end\n\n  // isOver() {\n  //   return this.board.isOver();\n  // }\n  //\n  // playMove(pos) {\n  //   this.board.placeMark(pos);\n  // }\n  //\n\n}\n\nexport default Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/game.js\n// module id = 2\n// module chunks = 0","\nconst NEIGHBORS = [\n    [-1, -1],\n    [-1,  0],\n    [-1,  1],\n    [ 0, -1],\n    [ 0,  1],\n    [ 1, -1],\n    [ 1,  0],\n    [ 1,  1]\n  ];\n\nclass Board {\n  constructor(size) {\n    this.size = size;\n\n    if (size === 16) {\n      this.bombs = 40;\n    } else if (size === 12) {\n      this.bombs = 22;\n    } else {\n      this.bombs = 10;\n    }\n\n    this.locations = this.BombLocations();\n    this.makeGrid(size);\n    this.setBombs = this.setBombs.bind(this);\n    this.neighbors = this.neighbors.bind(this);\n    this.reveal = this.reveal.bind(this);\n  }\n\n  compareArr(nestedArr, arr2) {\n    return nestedArr.forEach(function(arr1) {\n      if (arr1[0] === arr2[0] && arr1[1] === arr2[1]) {\n        return true;\n      }\n    });\n  }\n\n  BombLocations() {\n    let locations = [];\n    for (let i=0; locations.length < this.bombs; i++) {\n      let row = Math.floor(Math.random() * this.size);\n      let col = Math.floor(Math.random() * this.size);\n\n      if (!this.compareArr(locations, [row, col])) {\n        locations.push([row, col]);\n      }\n    }\n\n    return locations;\n  }\n\n  setBombs() {\n    let grid = this.grid;\n    this.locations.forEach(function(pos) {\n      let [x,y] = pos;\n      let test = grid[x][y].bomb;\n      grid[x][y].bomb = true;\n    });\n    // return this.grid;\n  }\n\n  makeGrid(size) {\n    this.grid = [];\n\n    for (let row=0; this.grid.length < size; row++) {\n      this.grid.push([]);\n      for (let col=0; this.grid[row].length < size; col++) {\n        this.grid[row].push({revealed: false, bomb: false, flagged: false, marked: false, content: \"\"});\n      }\n    }\n\n    this.setBombs();\n  }\n\n  neighbors(pos) {\n    let neighbors = [];\n    let [a,b] = pos;\n    let size = this.size;\n\n    NEIGHBORS.forEach(function(neighbor) {\n      let [c,d] = neighbor;\n      let x = a + c;\n      let y = b + d;\n\n      if ((0 <= x && x < size) && (0 <= y && y < size)) {\n        neighbors.push([a+c, b+d]);\n      }\n    });\n    return neighbors;\n  }\n\n  reveal(grid) {\n    this.locations.forEach(function(pos) {\n      let [x,y] = pos;\n      grid[x][y].revealed = true;\n      grid[x][y].content = \"X\";\n    });\n  }\n\n}\n\nexport default Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/board.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}